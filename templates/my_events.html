{% extends 'base.html' %}


{% block content %}



    <title>Document</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">

    <style>
      body{
        font-family: 'Poppins', sans-serif;
      }
      @media (max-width: 500px) {
        html{
            font-size: 12px;
        }
      }

      pre {
        white-space: pre-wrap;       /* css-3 */
        white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
        white-space: -pre-wrap;      /* Opera 4-6 */
        white-space: -o-pre-wrap;    /* Opera 7 */
        word-wrap: break-word;       /* Internet Explorer 5.5+ */
       }
    </style>


  <!-- <div class="fixed w-100 h-100 bg-indigo-200 rounded-circle " style="width: 400px; height: 400px; border-radius: 50%; top: -150px; left: -150px; z-index: -1;">

  </div>

  <div class="fixed w-100 h-100 bg-purple-400 rounded-circle " style="width: 400px; height: 400px; border-radius: 50%; top: -200px; right: -250px; z-index: -2;">

  </div>

  <div class="fixed w-100 h-100 bg-green-300 rounded-circle " style="width: 100px; height: 100px; border-radius: 50%; top: 50px; left: 400px; z-index: -2;">

  </div>

  <div class="fixed w-100 h-100 rounded-circle " style="width: 150px; height: 150px; border-radius: 50%; top: 300px; left: 100px; z-index: -2; background-color: #f69a70;">

  </div>

  <div class="fixed w-100 h-100 rounded-circle " style="width: 150px; height: 150px; border-radius: 50%; top: 500px; left: 500px; z-index: -2; background-color: #47eeb6;">

  </div>

  <div class="fixed w-100 h-100 rounded-circle " style="width: 150px; height: 150px; border-radius: 50%; top: 300px; right: 100px; z-index: -2; background-color: #0583d2;">

  </div>

  <div class="fixed w-100 h-100 rounded-circle " style="width: 150px; height: 150px; border-radius: 50%; top: 100px; right: 300px; z-index: -2; background-color: #e96cbb;">

  </div> -->

  <!-- <div class="fixed w-100 h-100 rounded-circle animate-bounce" style="width: 150px; height: 150px; border-radius: 50%; top: 300px; left: 100px; z-index: -2; background-color: #f69a70;">

  </div> -->
    
      <div id="eventsPage" class="fluid-container relative min-h-screen" style="padding-top: 100px">
        <h2 class="max-w-5xl mx-auto text-4xl text-left px-4 mt-10 mb-5 font-bold text-indigo-500 border-b-4 border-indigo-500">Registered Events</h2>
        <div class="container mx-auto max-w-5xl mt-10 mb-20 px-5">

          <section class="text-gray-600 body-font">
            <div class="w-full mx-auto">
              <div class=" w-full mx-auto overflow-auto">
                <table class="table-auto w-full text-left whitespace-no-wrap">
                  <thead>
                    <tr>
                      <th class="w-48 px-4 py-5 title-font tracking-wider font-medium text-gray-900 text-xl bg-gray-100 rounded-tl rounded-bl">Competition</th>
                      {% comment %} <th class="px-4 py-5 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100">Speed</th> {% endcomment %}
                      <th class="w-32 px-4 py-5 title-font tracking-wider font-medium text-gray-900 text-xl bg-gray-100">Event Date</th>
                      <th class="w-20 px-4 py-5 title-font tracking-wider font-medium text-gray-900 text-xl bg-gray-100">Event Type</th>
                      {% comment %} <th class="px-4 py-5 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-100">Price</th> {% endcomment %}
                      <th class="w-10 px-4  title-font tracking-wider font-medium text-gray-900 text-xl bg-gray-100 rounded-tr rounded-br">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for event in events %}
                        <tr>
                            <td class="px-4 py-3 text-lg">{{ event.event_name }}</td>
                            <td class="px-4 py-3">{{ event.event_date }}</td>
                            <td class="px-4 py-3">{{ event.type_of_event }}</td>
                            <td class="px-4 py-3"><button class="text-indigo-500 inline-flex  md:mb-2 lg:mb-0" onclick="viewDetails( {{ event.pk }} )">Learn More
                                <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-1" viewBox="0 0 24 24">
                                <path d="M5 12h14M12 5l7 7-7 7"></path>
                                </svg>
                            </button></td>
                        </tr>
                    {% endfor %}
                    {% comment %} <tr>
                        <td class="px-4 py-3">Start</td>
                        <td class="px-4 py-3">5 Mb/s</td>
                        <td class="px-4 py-3"><a class="text-indigo-500 inline-flex  md:mb-2 lg:mb-0">Learn More
                          <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-1" viewBox="0 0 24 24">
                            <path d="M5 12h14M12 5l7 7-7 7"></path>
                          </svg>
                        </a></td>
                    </tr> {% endcomment %}


                    
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </section>

        </div>
      </div>



    <section id="detailsPage" class="hidden text-gray-600 body-font" style="padding-top: 80px">
      
      <div class="container-fluid px-5 py-10 mx-auto flex flex-col">
          <button class="lg:w-5/6 mx-auto">
            <div id="closeDetailPage" class="mb-5" style="cursor: pointer;">
              <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-arrow-left-circle-fill" viewBox="0 0 16 16">
                <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>
              </svg>
            </div>
          <div class="rounded-lg h-96 overflow-hidden relative">
              <img id="poster_url" alt="content" class="object-cover object-center h-full w-full" src="https://img.freepik.com/free-vector/green-sand-paper_53876-86281.jpg?w=1060&t=st=1664517849~exp=1664518449~hmac=52aa99881012fefe313bc1b06e3d66c72d1a517bb375fab7a6f55fc783593d98">

              <h1 class="absolute font-medium title-font  text-gray-900 text-6xl font-bolder mb-4" id="event_name" style="top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: 800;">Web Development</h1>
          </div>
          <div class="flex flex-col-reverse lg:flex-row mt-10">
              <div class="lg:w-1/3 flex items-center gap-5 lg:block text-center sm:pr-8 sm:py-8 mt-5 sm:mt-0">
                  <div class="hidden sm:flex w-1/3 lg:w-full mx-auto rounded-full inline-flex items-center justify-center bg-gray-200 text-gray-400" style="width: 150px; height: 150px;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                          <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                      </svg>
                  </div>
                  <div class="w-full sm:w-2/3 lg:w-full flex flex-col items-center justify-center text-left px-3 lg:px-0  mt-0 lg:mt-5 border-l border-r lg:border-0">
                      <div class="w-full flex items-center justify-center mt-4 pb-2 border-b-2">
                          <div class="flex items-center justify-between w-4/5 mx-auto">
                            <h2 class="w-36 font-medium title-font text-gray-900 text-xl" >Host Name</h2>
                            <span class="text-center" id="host_name">Ritesh Thawkar</span>
                          </div>
                      </div>
                      <div class="w-full flex items-center justify-center mt-4 pb-2 border-b-2">
                          <div class="flex items-center justify-between w-4/5 mx-auto">
                            <h2 class="w-36 font-medium title-font  text-gray-900 text-xl" >Host Email</h2>
                            <span class="text-center" id="host_email">Ritesh Thawkar</span>
                          </div>
                      </div>
                      <div class="w-full flex items-center justify-center mt-4 pb-2 border-b-2">
                          <div class="flex items-center justify-between w-4/5 mx-auto">
                            <h2 class="w-36 font-medium title-font  text-gray-900 text-xl" >Host Phone</h2>
                            <span class="text-center" id="host_phone">Ritesh Thawkar</span>
                          </div>
                      </div>
                      <h2 class="w-36 font-medium title-font  text-gray-900 text-2xl mt-4" >Prizes</h2>
                      <div class="w-full flex items-center justify-center mt-4 pb-2 border-b-2">
                        <div class="flex items-center justify-between w-4/5 mx-auto">
                          <img class="w-12 h-100" src="https://cdn-icons-png.flaticon.com/512/4692/4692383.png" alt="prize">
                          <h2 class="w-36 font-medium title-font  text-gray-900 text-xl" id="first_prize" >1000 Rs.</h2>
                        </div>
                      </div>

                      <div class="w-full flex items-center justify-center mt-4 pb-2 border-b-2">
                        <div class="flex items-center justify-between w-4/5 mx-auto">
                          <img class="w-12 h-100" src="https://cdn-icons-png.flaticon.com/512/4692/4692385.png" alt="prize">
                          <h2 class="w-36 font-medium title-font  text-gray-900 text-xl" id="second_prize">500 Rs.</h2>
                        </div>
                      </div>

                      <div class="w-full flex items-center justify-center mt-4 pb-2 border-b-2">
                        <div class="flex items-center justify-between w-4/5 mx-auto">
                          <img class="w-12 h-100" src="https://cdn-icons-png.flaticon.com/512/4692/4692387.png" alt="prize">
                          <h2 class="w-36 font-medium title-font  text-gray-900 text-xl" id="third_prize">200 Rs.</h2>
                        </div>
                      </div>

                      
                      
                  </div>
              </div>
              <div class="lg:w-2/3 sm:pl-8 sm:py-8 sm:border-l border-gray-200 sm:border-t-0 border-t mt-4 pt-4 sm:mt-0 text-center sm:text-left">

                  <!-- <h2 class="font-medium title-font  text-gray-900 text-4xl font-bold mb-4" id="event_name">Web Development</h2> -->


                  <div class="flex flex-col items-center justify-center">
                      <div class="w-full flex items-end justify-between pb-2 border-b-2">
                          <div class="flex items-center gap-5">
                            <h2 class="font-medium title-font text-gray-900 text-xl" style="color: black;">Event Date : </h2>
                            <span class=" leading-relaxed text-lg text-left text-gray-500" id="event_date">12/05/2022</span>
                          </div>
                      </div>

                      <div class="w-full mt-4 pb-2 border-b-2">
                          <span class="font-medium title-font text-gray-900 text-xl float-left mr-4" style="color: black;">Event Description : </span>
                          <p class="leading-relaxed text-lg text-left text-gray-500" id="event_desc">Meggings portland fingerstache lyft, post-ironic fixie man bun banh mi umami everyday carry hexagon locavore direct trade art party. Locavore small batch listicle gastropub farm-to-table</p>
                      </div>

                      <div class="w-full flex items-end  mt-4 pb-2">
                          <h2 class="font-medium title-font text-gray-900 text-xl" style="color: black;">Event Type : </h2>
                          <span class="mx-4 leading-relaxed text-lg text-left text-gray-500" id="event_type">Individual / Team</span>
                      </div>

                      <div class="w-full flex items-end  mt-4 pb-2">
                          <h2 class="font-medium title-font text-gray-900 text-xl" style="color: black;">Registration start Date : </h2>
                          <span class="mx-4 leading-relaxed text-lg text-left text-gray-500" id="event_open_date">12/05/2022</span>
                      </div>

                      <div class="w-full flex items-end  mt-4 pb-2">
                          <h2 class="font-medium title-font text-gray-900 text-xl" style="color: black;">Registration Closing Date : </h2>
                          <span class="mx-4 leading-relaxed text-lg text-left text-gray-500" id="event_close_date">12/05/2022</span>
                      </div>

                      <div class="w-full flex items-end  mt-4 pb-2 border-b-2">
                          <h2 class="font-medium title-font text-gray-900 text-xl" style="color: black;">Registration Fee : </h2>
                          <span class="mx-4 leading-relaxed text-lg text-left text-gray-500" id="event_fee">Rs. 200</span>
                      </div>

                      <div class="w-full mt-4 pb-2 border-b-2">
                          <span class="font-medium title-font text-gray-900 text-xl float-left mr-4" style="color: black;">Event Venue : </span>
                          <p class="leading-relaxed text-lg text-left text-gray-500" id="event_venue">Meggings portland fingerstache lyft, post-ironic fixie man bun banh mi umami everyday carry hexagon locavore direct trade art party. Locavore small</p>
                      </div>

                      <div class="w-full mt-4 pb-2 border-b-2">
                          <span class="font-medium title-font text-gray-900 text-xl text-left" style="color: black;">Rules and Regulations : </span><br><br>
                          <pre style="font-family: 'Poppins', sans-serif;" class="w-100 text-lg text-left text-gray-500" id="event_rules">Meggings portland fingerstache lyft, post-ironic fixie man bun banh mi umami everyday carry hexagon locavore direct trade art party. Locavore small</pre>
                      </div>
                      
                  </div>

                  <!-- <p class="leading-relaxed text-lg mb-4">Meggings portland fingerstache lyft, post-ironic fixie man bun banh mi umami everyday carry hexagon locavore direct trade art party. Locavore small batch listicle gastropub farm-to-table lumbersexual salvia messenger bag. Coloring book flannel truffaut craft beer drinking vinegar sartorial, disrupt fashion axe normcore meh butcher. Portland 90's scenester vexillologist forage post-ironic asymmetrical, chartreuse disrupt butcher paleo intelligentsia pabst before they sold out four loko. 3 wolf moon brooklyn.</p>
                  <a class="text-indigo-500 inline-flex items-center">Learn More
                      <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-4 h-4 ml-2" viewBox="0 0 24 24">
                      <path d="M5 12h14M12 5l7 7-7 7"></path>
                      </svg>
                  </a> -->
              </div>
          </div>
          </div>
      </div>
    </section>


    <script>

      $("#closeDetailPage").click(()=>{
        $("#eventsPage").removeClass("hidden");
        $("#detailsPage").addClass("hidden");
      })

      function viewDetails(event_id){

        const poster_URL = "https://img.freepik.com/free-vector/green-sand-paper_53876-86281.jpg?w=1060&t=st=1664517849~exp=1664518449~hmac=52aa99881012fefe313bc1b06e3d66c72d1a517bb375fab7a6f55fc783593d98";

        $("#eventsPage").addClass("hidden");
        $("#detailsPage").removeClass("hidden");

        $("#host_name").html("");
        $("#host_email").html("");
        $("#host_phone").html("");

        $("#event_name").html("");
        $("#event_date").html("");
        $("#event_desc").html("");
        $("#event_type").html("");
        $("#event_open_date").html("");
        $("#event_close_date").html("");
        $("#event_fee").html("");
        $("#event_venue").html("");
        $("#event_rules").html("");
        $("#poster_url").html("");
        $("#first_prize").html("");
        $("#second_prize").html("");
        $("#third_prize").html("");

        const url = "/api_events_id/" + event_id +"/";
        $.get(url, (data, status)=>{
            
            if(status == "success"){

                const redirectURL = "/participation_form/" + data[0].pk +"/";

                $("#redirectBtn").attr("href", "");
                $("#redirectBtn").attr("href", redirectURL);

                const event_data = data[0].fields;

                $("#host_name").text(event_data.host_name);
                $("#host_email").text(event_data.host_email);
                $("#host_phone").text(event_data.host_phone);

                $("#event_date").text(event_data.event_date);
                $("#event_desc").text(event_data.discription);
                $("#event_type").text(event_data.type_of_event);
                $("#event_open_date").text(event_data.opening_event_date);
                $("#event_close_date").text(event_data.closing_event_date);
                $("#event_fee").text(event_data.event_fee);
                $("#event_venue").text(event_data.event_venue);
                $("#event_rules").text(event_data.rules);

                $("#first_prize").text(event_data.first_prize + "Rs.");
                $("#second_prize").text(event_data.second_prize + "Rs.");
                $("#third_prize").text(event_data.third_prize + "Rs.");

                if( event_data.poster_url){
                  $("#poster_url").attr("src", event_data.poster_url);
                }else{
                  $("#poster_url").attr("src", poster_URL);
                  $("#event_name").text(event_data.event_name);
                }


            }
        })

      }
    </script>

    {% endblock content %}